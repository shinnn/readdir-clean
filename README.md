# readdir-clean

[![npm version](https://img.shields.io/npm/v/readdir-clean.svg)](https://www.npmjs.com/package/readdir-clean)
[![Build Status](https://travis-ci.com/shinnn/readdir-clean.svg?branch=master)](https://travis-ci.com/shinnn/readdir-clean)
[![Coverage Status](https://img.shields.io/coveralls/shinnn/readdir-clean.svg)](https://coveralls.io/github/shinnn/readdir-clean?branch=master)

Like [`fs.promises.readdir()`](https://nodejs.org/api/fs.html#fs_fspromises_readdir_path_options) but excludes autogenerated contents for example `.DS_Store` and `Thumbs.db`

```javascript
const {readdir} = require('fs').promises;
const readdirClean = require('readdir-clean');

(async () => {
  await readdir('.');
  /*=> [
    '.DS_Store',
    '.AppleDouble',
    '.LSOverride',
    'a.txt',
    'b.txt',
    'Thumbs.db'
  ] */

  await readdirClean('.');
  /*=> [
    'a.txt',
    'b.txt'
  ] */
})();
```

## Installation

[Use](https://docs.npmjs.com/cli/install) [npm](https://docs.npmjs.com/about-npm/).

```
npm install readdir-clean
```

## API

```javascript
const readdirClean = require('readdir-clean');
```

### readdirClean(*path*)

*path*: `string` [`Buffer`](https://nodejs.org/api/buffer.html#buffer_class_buffer) `Uint8Array`  [`URL`](https://nodejs.org/api/url.html#url_class_url) (directory path)  
Return: `Promise<Array<string>>`

Similar to [Node.js](https://nodejs.org) built-in `fs.promises.readdir()`, but different in the following points:

* Doesn't support `encoding` option
* The paths are filtered with [`require('junk').not`](https://github.com/sindresorhus/junk#junknotfilename)

```javascript
(async () => {
  const paths = await readdirClean('path/to/dir');

  paths.includes('.Spotlight-V100'); //=> false
  paths.includes('.Trashes'); //=> false
  paths.includes('Desktop.ini'); //=> false
})();
```

## License

[ISC License](./LICENSE) Â© 2017 - 2019 Shinnosuke Watanabe
